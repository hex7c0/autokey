/*
 * autokey v1.3.1
 * (c) hex7c0 http://supergiovane.tk/#/autokey
 * Licensed under GPLv3
 */
"use strict";function body(a,b,c){var a=new Buffer(a),d=[],e=b,f=e.length,g=f;if(c)for(var h=0,i=a.length;i>h;h++)g>0?(d[h]=(a[h]-e.shift())%256,g--):d[h]=(a[h]-d[h-f])%256;else for(var h=0,i=a.length;i>h;h++)g>0?(d[h]=(a[h]+e.shift())%256,g--):d[h]=(a[h]+a[h-f])%256;return new Buffer(d)}function AUTOKEY(a){this.key,this.change(a)}module.exports=function(a){return new AUTOKEY(a)},AUTOKEY.prototype.change=function(a){if(this.key=new Array(a.legth),Array.isArray(a))this.key=a;else{if("string"!=typeof a&&!Buffer.isBuffer(a))throw new Error("Invalid data");for(var a=new Buffer(a),b=0,c=a.length;c>b;b++)this.key[b]=a[b]}},AUTOKEY.prototype.encodeString=function(a){return body(a,this.key.slice(0))},AUTOKEY.prototype.encodeArray=function(a){for(var b=body(a,this.key.slice(0)),c=new Array(b.length),d=0,e=b.length;e>d;d++)c[d]=b[d];return c},AUTOKEY.prototype.encodeBuffer=function(a){return body(a,this.key.slice(0))},AUTOKEY.prototype.encode=function(a){if("string"==typeof a)return this.encodeString(a);if(Array.isArray(a))return this.encodeArray(a);if(Buffer.isBuffer(a))return this.encodeBuffer(a);throw new Error("Invalid data")},AUTOKEY.prototype.decodeString=function(a){return body(a,this.key.slice(0),!0).toString()},AUTOKEY.prototype.decodeArray=function(a){for(var b=body(a,this.key.slice(0),!0),c=new Array(b.length),d=0,e=b.length;e>d;d++)c[d]=b[d];return c},AUTOKEY.prototype.decodeBuffer=function(a){return body(a,this.key.slice(0),!0)},AUTOKEY.prototype.decode=function(a){if("string"==typeof a)return this.decodeString(a);if(Array.isArray(a))return this.decodeArray(a);if(Buffer.isBuffer(a))return this.decodeBuffer(a);throw new Error("Invalid data")};
